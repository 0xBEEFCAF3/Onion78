@page "/receive/password"
@using Chaincase.UI.Services;

@inject UIStateService UiStateService
@inject NavigationManager NavigationManager
@inject ReceiveViewModel ReceiveViewModel
@inherits ReactiveComponentBase<ReceiveViewModel>

<ion-content class="ion-padding">

    <PasswordInputItem @bind-Value="Password" />
    <IonButton @onclick="ClickSubmitPassword" expand="block">Continue</IonButton>

</ion-content>

@code {
    private string Password { get; set; }

    protected override void OnInitialized()
    {
        ViewModel = ReceiveViewModel;
        UiStateService.Title = "RECEIVE";
    }

    private void ClickSubmitPassword(MouseEventArgs _)
    {
        SubmitPassword(Password);
    }

    private void SubmitPassword(string password)
    {
        if (ViewModel.DidGetNextReceiveKey(password ?? ""))
            NavigationManager.NavigateTo("receive/address");
    }
}
