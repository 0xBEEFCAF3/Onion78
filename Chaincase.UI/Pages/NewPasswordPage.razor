@page "/new"
@using Chaincase.Common.Contracts
@using Chaincase.UI.Services
@using Chaincase.Common
@inject Global Global
@inject IHsmStorage HsmStorage
@inject NewPasswordViewModel vm
@inject UIStateService UiStateService
@inject NavigationManager NavigationManager

@inherits ReactiveComponentBase<NewPasswordViewModel>

<ion-content class="ion-padding">
    <h1>Set your password</h1>
    <IonItem>
        <ion-label floating>Password</ion-label>
        <IonPasswordInput @bind-Value="@Password" placeholder="e.g. margaretthatcheris110%SEXY" />
    </IonItem>
    <IonButton OnClick='SubmitPassword' expand="block">NEXT</IonButton>
</ion-content>

@code {
    string Password;
    protected override void OnInitialized()
    {
        ViewModel = vm;
        UiStateService.Title = "CREATE WALLET";
    }

    private void SubmitPassword(MouseEventArgs _)
    {
        ViewModel.SetPassword(Password);
        NavigationManager.NavigateTo("");
    }
}
