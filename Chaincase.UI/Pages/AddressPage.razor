@page "/receive/address"
@using Chaincase.UI.Services
@using Chaincase.Common.Contracts
@inject UIStateService UiStateService
@inject NavigationManager NavigationManager
@inject ReceiveViewModel ReceiveViewModel
@inject IShare Share
@inherits ReactiveComponentBase<ReceiveViewModel>

<IonContent class="ion-padding">
    <p style="width: 256px; height: 256px; margin: auto">
        <QRCode Data="@ViewModel.BitcoinUri"></QRCode>
    </p>
   

    <p>@ViewModel.AppliedLabel</p>
    <IonLabel>Address</IonLabel>
    <p>@ViewModel.Address</p>

    <IonButton OnClick="ShareLink" expand="block">SHARE LINK</IonButton>
    <IonButton href="/" expand="block">DONE</IonButton>
</IonContent>

@code {

    protected override void OnInitialized()
    {
        ViewModel = ReceiveViewModel;
        UiStateService.Title = "RECEIVE";
    }

    private async Task ShareLink() {
         await Share.ShareText(ViewModel.BitcoinUri);
    }
}
